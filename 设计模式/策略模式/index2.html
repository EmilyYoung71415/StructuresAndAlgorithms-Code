<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <form action="" method="post" id="form">
        <div>
            <label for="username">姓名</label>
            <input type="text" id="username" data-verify='username'>
        </div>
        <div>
            <label for="phone">电话</label>
            <input type="text" id="phone" data-verify='phone|minLen:2|number|required'>
        </div>
        <button type="submit">提交</button>
    </form>
    <script src="./verify.js"></script>
    <script>
        const form = document.querySelector('#form');
       
        let p = new Verify({
            dom:"#form",
            // return errMsg 接收一个函数则执行这个函数 
            // 所以需要遵循内部的校验规则 返回一样的错误提示信息
            username:function(value){// 自定义校验
                // 用户名不出现特殊字符、用户名首尾不出现 下划线 用户名不能全为数字
                if(!new RegExp("^[a-zA-Z0-9_\u4e00-\u9fa5\\s·]+$").test(value)){
                    return '用户名不能有特殊字符';
                }
                if(/(^\_)|(\__)|(\_+$)/.test(value)){
                    return '用户名首尾不能出现下划线\'_\'';
                }
                if(/^\d+\d+\d$/.test(value)){
                    return '用户名不能全为数字';
                }
            }
        })
        form.addEventListener('submit',function(){
            let err = p.start()
            alert(err)
        },false)
    </script>
</body>
</html>